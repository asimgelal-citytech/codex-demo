<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-5">
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script type="text/babel">
    function AdminPanel() {
      const [users, setUsers] = React.useState([]);
      React.useEffect(() => {
        fetch('/api/users')
          .then(res => res.json())
          .then(setUsers);
      }, []);
      const updateUser = (id, description) => {
        fetch('/api/users/' + id, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ description })
        }).then(() => {
          setUsers(users.map(u => u.id === id ? { ...u, description } : u));
        });
      };
      return (
        <div>
          <h1 className="mb-4">Admin Panel</h1>
          <div className="table-responsive">
            <table className="table table-bordered align-middle">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Username</th>
                  <th>Email</th>
                  <th>Description</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                {users.map(user => (
                  <tr key={user.id}>
                    <td>{user.name}</td>
                    <td>{user.username}</td>
                    <td>{user.email}</td>
                    <td>
                      <textarea className="form-control" value={user.description || ''}
                        onChange={e => {
                          const val = e.target.value;
                          setUsers(users.map(u => u.id === user.id ? { ...u, description: val } : u));
                        }}></textarea>
                    </td>
                    <td>
                      <button className="btn btn-sm btn-primary" onClick={() => updateUser(user.id, user.description || '')}>Save</button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      );
    }
    ReactDOM.render(<AdminPanel />, document.getElementById('root'));
  </script>
</body>
</html>
